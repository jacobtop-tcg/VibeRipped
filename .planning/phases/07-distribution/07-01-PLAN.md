---
phase: 07-distribution
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [package.json, .gitignore, LICENSE]
autonomous: true

must_haves:
  truths:
    - "User can run `npm i -g viberipped` and immediately use `vibripped` command from any directory"
    - "Repository includes proper npm packaging metadata for public consumption"
    - "Package contains only runtime files (no tests, no .planning, no dev artifacts)"
    - "Bin script has correct shebang and executable permissions across platforms"
  artifacts:
    - path: "package.json"
      provides: "Complete npm package metadata with files whitelist, repository, engines, author, version 1.0.0"
      contains: "\"version\": \"1.0.0\""
    - path: "LICENSE"
      provides: "MIT license file"
      contains: "MIT License"
    - path: ".gitignore"
      provides: "Comprehensive gitignore for Node.js CLI project"
      contains: "*.tgz"
  key_links:
    - from: "package.json files field"
      to: "bin/, lib/, engine.js, statusline.js, statusline-orchestrator.sh"
      via: "npm pack whitelist"
      pattern: "\"files\""
    - from: "package.json bin field"
      to: "bin/vibripped.js"
      via: "npm global install symlink"
      pattern: "\"bin\""
---

<objective>
Prepare VibeRipped for npm distribution with complete package metadata, LICENSE, and .gitignore.

Purpose: Enable users to install VibeRipped globally via `npm i -g viberipped` with a clean, professional package that includes only runtime files.
Output: Updated package.json (v1.0.0), MIT LICENSE file, updated .gitignore, verified via `npm pack --dry-run`.
</objective>

<execution_context>
@/Users/jacob/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jacob/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-distribution/07-RESEARCH.md
@package.json
@.gitignore
</context>

<tasks>

<task type="auto">
  <name>Task 1: Package metadata, LICENSE, and .gitignore</name>
  <files>package.json, LICENSE, .gitignore</files>
  <action>
Update package.json with the following changes (preserve existing fields, add/modify only what's listed):

1. Bump version from "0.1.0" to "1.0.0"
2. Add `files` whitelist array: `["bin/", "lib/", "engine.js", "statusline.js", "statusline-orchestrator.sh", "LICENSE", "README.md"]`
3. Add `prepublishOnly` script: `"prepublishOnly": "npm test"` (keep existing `test` script)
4. Add `repository` field (use placeholder -- user fills in before publish):
   ```json
   "repository": {
     "type": "git",
     "url": "https://github.com/USERNAME/viberipped.git"
   }
   ```
5. Add `homepage`: `"https://github.com/USERNAME/viberipped"`
6. Add `bugs`: `{ "url": "https://github.com/USERNAME/viberipped/issues" }`
7. Add `author`: `"USERNAME"` (placeholder -- user fills in before publish)
8. Add `engines`: `{ "node": ">=18.0.0" }`
9. Expand `keywords` to: `["exercise", "rotation", "productivity", "claude-code", "cli", "fitness", "micro-breaks", "statusline"]`

Use placeholder "USERNAME" for GitHub/author fields. Do NOT invent real usernames. User will replace before publishing.

Create MIT LICENSE file at project root with year 2026 and placeholder "[Author Name]" for copyright holder. Use the standard MIT License text from https://opensource.org/licenses/MIT.

Update .gitignore (currently only has `node_modules/`) to add:
```
*.tgz
coverage/
.nyc_output/
.DS_Store
.env
.env.local
```
Keep existing `node_modules/` line.
  </action>
  <verify>
Run `node -e "const p = require('./package.json'); console.log(p.version, p.files ? 'has files' : 'NO files', p.engines ? 'has engines' : 'NO engines')"` -- should output "1.0.0 has files has engines".
Run `test -f LICENSE && echo "LICENSE exists" || echo "MISSING"` -- should output "LICENSE exists".
Run `npm pack --dry-run 2>&1` -- should show ONLY runtime files (bin/, lib/, engine.js, statusline.js, statusline-orchestrator.sh, LICENSE, README.md, package.json). Should NOT show test/, .planning/, .git/, node_modules/.
  </verify>
  <done>
package.json has version 1.0.0, files whitelist, repository/homepage/bugs/author/engines fields, prepublishOnly script. LICENSE file exists with MIT text. .gitignore covers tgz, coverage, DS_Store, env files. `npm pack --dry-run` confirms only runtime files included.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify global install via tarball</name>
  <files></files>
  <action>
Run the following verification sequence to confirm the package installs and works correctly as a global npm package:

1. Run `npm pack` to create the tarball (viberipped-1.0.0.tgz)
2. Run `npm install -g ./viberipped-1.0.0.tgz` to install globally from the tarball
3. Run `vibripped --version` -- should output "1.0.0"
4. Run `vibripped --help` -- should show usage with all commands
5. Run `vibripped test` -- should either show an exercise or show a config prompt (depends on whether config exists)
6. Run `npm uninstall -g viberipped` to clean up
7. Delete the tarball: `rm viberipped-1.0.0.tgz`

If any step fails, diagnose and fix the issue in package.json or source files. The most common failure is missing files in the `files` whitelist -- if `vibripped test` fails with "Cannot find module", check that the required lib/ files are included.

NOTE: README.md may not exist yet (parallel plan creates it). `npm pack --dry-run` may show a warning about missing README -- that is acceptable. The `files` field in package.json already lists README.md so it will be included once created.
  </action>
  <verify>
All 7 steps above complete without error. `vibripped --version` outputs "1.0.0". `vibripped --help` shows the command list. Tarball and global install cleaned up.
  </verify>
  <done>
Global install from tarball works end-to-end: install, version check, help output, test command, uninstall. Package is confirmed ready for `npm publish`.
  </done>
</task>

</tasks>

<verification>
- `npm pack --dry-run` shows only runtime files (no test/, .planning/, .git/)
- Global install from tarball produces working `vibripped` command
- `vibripped --version` outputs "1.0.0"
- LICENSE file exists with MIT text
- .gitignore covers distribution artifacts
</verification>

<success_criteria>
Package is ready for `npm publish` with complete metadata, verified global install, and clean file whitelist. User only needs to replace USERNAME placeholders with their GitHub username/author name before publishing.
</success_criteria>

<output>
After completion, create `.planning/phases/07-distribution/07-01-SUMMARY.md`
</output>
